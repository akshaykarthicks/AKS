<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post</title>
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <header>
        <nav class="navbar" role="navigation" aria-label="Main navigation">
            <div class="nav-container">
                <div class="logo">
                    <span class="logo-bracket" aria-hidden="true">[</span>
                    <span class="logo-text">AK</span>
                    <span class="logo-bracket" aria-hidden="true">]</span>
                </div>
                <ul class="nav-menu" role="menubar">
                    <li role="none"><a href="index.html" class="nav-link" data-text="Home" role="menuitem">Home</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <section id="blog-post" class="blog-post">
            <div class="container">
                <a href="index.html#blog" class="back-link"><i class="fas fa-arrow-left"></i> Back to Blog</a>
                <h1 id="post-title"></h1>
                <div class="post-meta">
                    <span id="post-author"></span> | <span id="post-pub-date"></span>
                </div>
                <div id="post-content" class="post-content"></div>
            </div>
        </section>
    </main>

    <script>
        // Custom Cursor
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');

        window.addEventListener('mousemove', (e) => {
            const posX = e.clientX;
            const posY = e.clientY;

            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;

            cursorOutline.animate({
                left: `${posX}px`,
                top: `${posY}px`
            }, { duration: 500, fill: 'forwards' });
        });

        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const postGuid = urlParams.get('guid');

            if (postGuid) {
                const mediumUsername = '@ak-sy';
                const mediumRssFeed = `https://medium.com/feed/${mediumUsername}`;
                const rssToJsonApi = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(mediumRssFeed)}`;

                fetch(rssToJsonApi)
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'ok') {
                            const post = data.items.find(item => item.guid === postGuid);
                            if (post) {
                                document.getElementById('post-title').innerText = post.title;
                                document.getElementById('post-author').innerText = `By ${post.author}`;
                                document.getElementById('post-pub-date').innerText = new Date(post.pubDate).toLocaleDateString();
                                document.getElementById('post-content').innerHTML = post.content;
                            } else {
                                document.getElementById('post-content').innerHTML = '<p>Could not find the blog post.</p>';
                            }
                        } else {
                            document.getElementById('post-content').innerHTML = '<p>Could not load the blog feed. Please try again later.</p>';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching feed:', error);
                        document.getElementById('post-content').innerHTML = '<p>Could not load the blog feed. Please try again later.</p>';
                    });
            }
        });
    </script>
</body>

</html>
